import{b as P,l as w,R as I,j as e,P as h,B as t,C as R,d as i,am as j,D as u,F as $,H as F,A as b,J as A,g as x,k as c,ah as D,E as W,s as M,K as N,O as k,Q as B,U as C,V as n,X as U}from"./index-CUqXZ82V.js";import{i as V}from"./hooks-DbXgi7GY.js";import{E as y}from"./EmojiEvents-B9lpDZZO.js";const G=({filters:S})=>{const o=P(),m=w(o.breakpoints.down("md")),{data:a,isLoading:z,error:v}=V(S),[d,E]=I.useState(!1);if(z)return e.jsx(h,{elevation:3,sx:{p:{xs:2,sm:3},borderRadius:2},children:e.jsx(t,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(R,{})})});if(v||!a)return e.jsx(h,{elevation:3,sx:{p:{xs:2,sm:3},borderRadius:2},children:e.jsx(i,{color:"error",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Erro ao carregar crianças mais engajadas"})});const g=3,T=m&&!d?(a.topEngagedChildren||[]).slice(0,g):a.topEngagedChildren||[],l=s=>{switch(s){case 0:return"#FFD700";case 1:return"#C0C0C0";case 2:return"#CD7F32";default:return o.palette.grey[400]}},p=s=>s>=90?"success":s>=75?"info":s>=60?"warning":"default",f=s=>{const r=s.split(" ");return r.length>=2?`${r[0][0]}${r[1][0]}`.toUpperCase():s.substring(0,2).toUpperCase()};return e.jsxs(h,{elevation:3,sx:{p:{xs:2,sm:3},borderRadius:2,width:"98%",maxWidth:"98%",overflow:"hidden"},children:[e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1,mb:{xs:2,sm:3}},children:[e.jsx(j,{sx:{color:o.palette.warning.main,fontSize:{xs:24,sm:28}}}),e.jsx(i,{variant:"h6",fontWeight:"bold",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:"⭐ Crianças Mais Engajadas"})]}),!a.topEngagedChildren||a.topEngagedChildren.length===0?e.jsx(t,{sx:{textAlign:"center",py:4},children:e.jsx(i,{color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Nenhum dado disponível"})}):m?e.jsxs(u,{spacing:2,children:[T.map((s,r)=>e.jsx($,{elevation:2,sx:{borderRadius:2,border:r<3?`2px solid ${l(r)}40`:void 0,bgcolor:r<3?`${l(r)}10`:void 0},children:e.jsx(F,{sx:{p:{xs:1.5,sm:2}},children:e.jsxs(u,{spacing:1.5,children:[e.jsx(t,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1.5,flex:1},children:[r<3?e.jsx(y,{sx:{color:l(r),fontSize:{xs:20,sm:24}}}):e.jsx(i,{fontWeight:"bold",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:r+1}),e.jsx(b,{sx:{width:{xs:32,sm:36},height:{xs:32,sm:36},bgcolor:s.gender==="F"?o.palette.secondary.main:o.palette.info.main,fontSize:{xs:12,sm:14}},children:f(s.childName)}),e.jsx(t,{sx:{flex:1,minWidth:0},children:e.jsx(i,{fontWeight:"medium",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.childName})})]})}),e.jsx(A,{}),e.jsxs(x,{container:!0,spacing:1.5,children:[e.jsx(x,{item:!0,xs:6,children:e.jsxs(t,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Idade"}),e.jsxs(i,{variant:"body2",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:[s.age," anos"]})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(t,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Cidade"}),e.jsx(i,{variant:"body2",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.city?`${s.city}, ${s.state}`:"-"})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(t,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Tempo"}),e.jsxs(i,{variant:"body2",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:[s.monthsParticipating," ",s.monthsParticipating===1?"mês":"meses"]})]})}),e.jsx(x,{item:!0,xs:6,children:e.jsxs(t,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Pagelas"}),e.jsx(i,{variant:"body2",fontWeight:"bold",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.totalPagelas})]})})]}),e.jsxs(t,{sx:{display:"flex",gap:1,flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(t,{sx:{flex:1},children:e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:["Presença: ",s.presenceRate.toFixed(1),"%"]})}),e.jsx(c,{label:`Engajamento: ${s.engagementScore.toFixed(0)}`,color:p(s.engagementScore),size:"small",icon:e.jsx(j,{}),sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}}})]}),s.hasDecision&&e.jsx(t,{children:e.jsx(c,{label:s.decisionType==="ACCEPTED"?"Aceitou":"Reconciliado",color:"success",size:"small",variant:"outlined",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}}})})]})})},s.childId)),m&&a.topEngagedChildren.length>g&&e.jsx(t,{sx:{display:"flex",justifyContent:"center",pt:1},children:e.jsx(D,{variant:"outlined",onClick:()=>E(!d),endIcon:d?e.jsx(W,{}):e.jsx(M,{}),sx:{textTransform:"none",borderRadius:2,px:3},children:d?`Ver menos (mostrando ${a.topEngagedChildren.length})`:`Ver mais (${a.topEngagedChildren.length-g} restantes)`})})]}):e.jsx(N,{children:e.jsxs(k,{children:[e.jsx(B,{children:e.jsxs(C,{children:[e.jsx(n,{width:60,children:e.jsx("strong",{children:"Pos."})}),e.jsx(n,{children:e.jsx("strong",{children:"Nome"})}),e.jsx(n,{align:"center",children:e.jsx("strong",{children:"Idade"})}),e.jsx(n,{children:e.jsx("strong",{children:"Cidade"})}),e.jsx(n,{align:"center",children:e.jsx("strong",{children:"Tempo"})}),e.jsx(n,{align:"right",children:e.jsx("strong",{children:"Pagelas"})}),e.jsx(n,{align:"right",children:e.jsx("strong",{children:"Presença %"})}),e.jsx(n,{align:"center",children:e.jsx("strong",{children:"Engajamento"})}),e.jsx(n,{align:"center",children:e.jsx("strong",{children:"Decisão"})})]})}),e.jsx(U,{children:a.topEngagedChildren.map((s,r)=>e.jsxs(C,{hover:!0,sx:{backgroundColor:r<3?`${l(r)}10`:"transparent"},children:[e.jsx(n,{children:e.jsx(t,{sx:{display:"flex",alignItems:"center",gap:1},children:r<3?e.jsx(y,{sx:{color:l(r),fontSize:24}}):e.jsx(i,{fontWeight:"bold",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:r+1})})}),e.jsx(n,{children:e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(b,{sx:{width:32,height:32,bgcolor:s.gender==="F"?o.palette.secondary.main:o.palette.info.main,fontSize:14},children:f(s.childName)}),e.jsx(i,{fontWeight:"medium",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.childName})]})}),e.jsxs(n,{align:"center",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:[s.age," anos"]}),e.jsx(n,{sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.city?`${s.city}, ${s.state}`:"-"}),e.jsxs(n,{align:"center",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:[s.monthsParticipating," ",s.monthsParticipating===1?"mês":"meses"]}),e.jsx(n,{align:"right",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.totalPagelas}),e.jsxs(n,{align:"right",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:[s.presenceRate.toFixed(1),"%"]}),e.jsx(n,{align:"center",children:e.jsx(c,{label:s.engagementScore.toFixed(0),color:p(s.engagementScore),size:"small",icon:e.jsx(j,{})})}),e.jsx(n,{align:"center",children:s.hasDecision?e.jsx(c,{label:s.decisionType==="ACCEPTED"?"Aceitou":"Reconciliado",color:"success",size:"small",variant:"outlined"}):e.jsx(c,{label:"-",size:"small",variant:"outlined"})})]},s.childId))})]})})]})};export{G as T};
