import{c as M,j as e,b as A,R as C,P as x,B as n,C as B,d as s,h as K,i as f,g as o}from"./index-CUqXZ82V.js";import{a as T}from"./hooks-DbXgi7GY.js";import{R as h,T as p,L as W,B as u,b as y,X as g,Y as b,c as d}from"./BarChart-D0sRNF_8.js";import{R as z,P as S,a as w,b as D,c as F}from"./RadarChart-B4CHg2Jx.js";const I=M(e.jsx("path",{d:"M9.01 14H2v2h7.01v3L13 15l-3.99-4zm5.98-1v-3H22V8h-7.01V5L11 9z"}),"CompareArrows"),H=({filters:R})=>{const a=A(),{data:i,isLoading:P}=T(R),[v,k]=C.useState("radar");if(P)return e.jsx(x,{elevation:3,sx:{p:3,borderRadius:3},children:e.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(B,{})})});if(!i)return e.jsx(x,{elevation:3,sx:{p:3,borderRadius:3},children:e.jsx(s,{color:"error",children:"Erro ao carregar dados"})});const j={byGender:i.byGender.map(t=>({category:t.gender==="M"?"Masculino":"Feminino",PresenÃ§a:t.presenceRate,MeditaÃ§Ã£o:t.meditationRate,RecitaÃ§Ã£o:t.verseRecitationRate})),byAgeGroup:i.byAgeGroup.map(t=>({category:t.ageGroup,PresenÃ§a:t.presenceRate,MeditaÃ§Ã£o:t.meditationRate,RecitaÃ§Ã£o:t.verseRecitationRate})),byParticipationTime:i.byParticipationTime.map(t=>({category:t.timeRange,PresenÃ§a:t.presenceRate,MeditaÃ§Ã£o:t.meditationRate,RecitaÃ§Ã£o:t.verseRecitationRate}))},l=[{metric:"PresenÃ§a",value:i.byGender.reduce((t,r)=>t+r.presenceRate,0)/i.byGender.length},{metric:"MeditaÃ§Ã£o",value:i.byGender.reduce((t,r)=>t+r.meditationRate,0)/i.byGender.length},{metric:"RecitaÃ§Ã£o",value:i.byGender.reduce((t,r)=>t+r.verseRecitationRate,0)/i.byGender.length}],c=({active:t,payload:r})=>t&&r&&r.length?e.jsxs(x,{elevation:8,sx:{p:2,background:a.palette.background.paper,border:`1px solid ${a.palette.divider}`,borderRadius:2},children:[e.jsx(s,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:r[0].payload.category}),r.map((m,G)=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[e.jsx(n,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:m.color}}),e.jsxs(s,{variant:"body2",children:[m.name,": ",e.jsxs("strong",{children:[m.value.toFixed(1),"%"]})]})]},G))]}):null;return e.jsxs(x,{elevation:0,sx:{p:3,borderRadius:3,background:`linear-gradient(135deg, ${a.palette.background.paper} 0%, ${a.palette.secondary.main}03 100%)`,border:`2px solid ${a.palette.divider}`},children:[e.jsx(n,{sx:{mb:3},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1},children:[e.jsx(I,{sx:{fontSize:28,color:a.palette.secondary.main}}),e.jsx(s,{variant:"h5",fontWeight:"bold",children:"ðŸ“Š ComparaÃ§Ã£o de Atividades"})]}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"AnÃ¡lise comparativa: PresenÃ§a vs MeditaÃ§Ã£o vs RecitaÃ§Ã£o"})]}),e.jsxs(K,{value:v,exclusive:!0,onChange:(t,r)=>r&&k(r),size:"small",children:[e.jsx(f,{value:"radar",children:"Radar"}),e.jsx(f,{value:"bar",children:"Barras"})]})]})}),e.jsxs(n,{sx:{mb:3,p:2,bgcolor:"rgba(156, 39, 176, 0.08)",borderRadius:2},children:[e.jsx(s,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Taxas MÃ©dias Gerais"}),e.jsx(o,{container:!0,spacing:2,children:l.map(t=>e.jsx(o,{item:!0,xs:12,sm:4,children:e.jsxs(n,{children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:t.metric}),e.jsxs(s,{variant:"h5",fontWeight:"bold",color:"secondary",children:[t.value.toFixed(1),"%"]})]})},t.metric))})]}),v==="radar"&&e.jsx(h,{width:"100%",height:350,children:e.jsxs(z,{data:l,children:[e.jsx(S,{stroke:a.palette.divider}),e.jsx(w,{dataKey:"metric",tick:{fill:a.palette.text.secondary,fontSize:12}}),e.jsx(D,{angle:90,domain:[0,100],tick:{fontSize:11}}),e.jsx(F,{name:"Taxa MÃ©dia",dataKey:"value",stroke:a.palette.secondary.main,fill:a.palette.secondary.main,fillOpacity:.5,strokeWidth:3}),e.jsx(p,{content:e.jsx(c,{})}),e.jsx(W,{})]})}),e.jsxs(o,{container:!0,spacing:3,sx:{mt:2},children:[e.jsxs(o,{item:!0,xs:12,md:4,children:[e.jsx(s,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Por GÃªnero"}),e.jsx(h,{width:"100%",height:200,children:e.jsxs(u,{data:j.byGender,children:[e.jsx(y,{strokeDasharray:"3 3",stroke:a.palette.divider}),e.jsx(g,{dataKey:"category",stroke:a.palette.text.secondary,style:{fontSize:10}}),e.jsx(b,{domain:[0,100],stroke:a.palette.text.secondary,style:{fontSize:10}}),e.jsx(p,{content:e.jsx(c,{})}),e.jsx(d,{dataKey:"PresenÃ§a",fill:a.palette.success.main}),e.jsx(d,{dataKey:"MeditaÃ§Ã£o",fill:a.palette.info.main}),e.jsx(d,{dataKey:"RecitaÃ§Ã£o",fill:a.palette.secondary.main})]})})]}),e.jsxs(o,{item:!0,xs:12,md:4,children:[e.jsx(s,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Por Faixa EtÃ¡ria"}),e.jsx(h,{width:"100%",height:200,children:e.jsxs(u,{data:j.byAgeGroup,children:[e.jsx(y,{strokeDasharray:"3 3",stroke:a.palette.divider}),e.jsx(g,{dataKey:"category",stroke:a.palette.text.secondary,style:{fontSize:10}}),e.jsx(b,{domain:[0,100],stroke:a.palette.text.secondary,style:{fontSize:10}}),e.jsx(p,{content:e.jsx(c,{})}),e.jsx(d,{dataKey:"PresenÃ§a",fill:a.palette.success.main}),e.jsx(d,{dataKey:"MeditaÃ§Ã£o",fill:a.palette.info.main}),e.jsx(d,{dataKey:"RecitaÃ§Ã£o",fill:a.palette.secondary.main})]})})]}),e.jsxs(o,{item:!0,xs:12,md:4,children:[e.jsx(s,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Por Tempo de ParticipaÃ§Ã£o"}),e.jsx(h,{width:"100%",height:200,children:e.jsxs(u,{data:j.byParticipationTime,children:[e.jsx(y,{strokeDasharray:"3 3",stroke:a.palette.divider}),e.jsx(g,{dataKey:"category",stroke:a.palette.text.secondary,style:{fontSize:9},angle:-20,textAnchor:"end",height:60}),e.jsx(b,{domain:[0,100],stroke:a.palette.text.secondary,style:{fontSize:10}}),e.jsx(p,{content:e.jsx(c,{})}),e.jsx(d,{dataKey:"PresenÃ§a",fill:a.palette.success.main}),e.jsx(d,{dataKey:"MeditaÃ§Ã£o",fill:a.palette.info.main}),e.jsx(d,{dataKey:"RecitaÃ§Ã£o",fill:a.palette.secondary.main})]})})]})]}),e.jsxs(n,{sx:{mt:3,p:2,bgcolor:"rgba(76, 175, 80, 0.08)",borderRadius:2},children:[e.jsx(s,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"ðŸ’¡ Insights"}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsxs(o,{item:!0,xs:12,sm:4,children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Atividade Mais Alta"}),e.jsx(s,{variant:"body1",fontWeight:"bold",children:l.reduce((t,r)=>r.value>t.value?r:t).metric})]}),e.jsxs(o,{item:!0,xs:12,sm:4,children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"Atividade Mais Baixa"}),e.jsx(s,{variant:"body1",fontWeight:"bold",children:l.reduce((t,r)=>r.value<t.value?r:t).metric})]}),e.jsxs(o,{item:!0,xs:12,sm:4,children:[e.jsx(s,{variant:"caption",color:"text.secondary",children:"DiferenÃ§a MÃ¡xima"}),e.jsxs(s,{variant:"body1",fontWeight:"bold",children:[(Math.max(...l.map(t=>t.value))-Math.min(...l.map(t=>t.value))).toFixed(1),"%"]})]})]})]})]})};export{H as A};
