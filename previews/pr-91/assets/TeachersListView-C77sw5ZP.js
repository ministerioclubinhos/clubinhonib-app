import{b as $,l as B,R as p,j as e,P as m,B as a,C as M,d as i,g as r,ak as I,ah as L,al as A,I as F,E as N,s as O,t as H,m as c,M as h,D as w,F as U,H as q,A as S,k as u,n as y,J as G,L as z,am as C,K as Q,O as V,Q as X,U as W,V as n,X as J,aj as K,w as Y}from"./index-CUqXZ82V.js";import{h as Z}from"./hooks-DbXgi7GY.js";import{P as _,g as ee}from"./PeriodFilter-DpH4Af4z.js";const te=()=>{const o=$(),f=B(o.breakpoints.down("md")),[t,g]=p.useState({page:1,limit:f?5:20,sortBy:"effectivenessScore",sortOrder:"DESC"});p.useEffect(()=>{const s=f?5:20;t.limit!==s&&g({...t,limit:s,page:1})},[f]);const[j,P]=p.useState(!1),{data:l,isLoading:k}=Z(t),d=(s,x)=>{g({...t,[s]:x||void 0,page:1})},R=(s,x)=>{g({...t,page:x+1})},D=s=>{g({...t,limit:parseInt(s.target.value,10),page:1})},E=()=>{g({page:1,limit:f?5:20,sortBy:"effectivenessScore",sortOrder:"DESC"})},v=s=>s>=85?"success":s>=70?"info":s>=60?"warning":"default",b=s=>{const x=s.split(" ");return x.length>=2?`${x[0][0]}${x[1][0]}`.toUpperCase():s.substring(0,2).toUpperCase()};return k?e.jsx(m,{elevation:3,sx:{p:3,borderRadius:3},children:e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(M,{})})}):l?e.jsxs(a,{sx:{width:"100%",maxWidth:"100%",overflowX:"hidden"},children:[e.jsxs(r,{container:!0,spacing:{xs:1.5,sm:2},sx:{mb:3,width:"100%",maxWidth:"100%",margin:0,display:"flex",flexWrap:"wrap"},children:[e.jsx(r,{item:!0,xs:6,sm:6,md:3,sx:{width:"100%",maxWidth:"100%"},children:e.jsxs(m,{elevation:0,sx:{p:{xs:1.5,sm:2},borderRadius:2,border:`2px solid ${o.palette.divider}`,width:"100%",maxWidth:"100%",overflow:"hidden"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Total Professores"}),e.jsx(i,{variant:"h5",fontWeight:"bold",color:"primary",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"},wordBreak:"break-word"},children:l.summary.filteredTeachers}),e.jsxs(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},wordBreak:"break-word"},children:["(",l.summary.activeTeachers," ativos)"]})]})}),e.jsx(r,{item:!0,xs:6,sm:6,md:3,sx:{width:"100%",maxWidth:"100%"},children:e.jsxs(m,{elevation:0,sx:{p:{xs:1.5,sm:2},borderRadius:2,border:`2px solid ${o.palette.divider}`,width:"100%",maxWidth:"100%",overflow:"hidden"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Total Crianças"}),e.jsx(i,{variant:"h5",fontWeight:"bold",color:"info.main",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"},wordBreak:"break-word"},children:l.summary.totalChildren})]})}),e.jsx(r,{item:!0,xs:6,sm:6,md:3,sx:{width:"100%",maxWidth:"100%"},children:e.jsxs(m,{elevation:0,sx:{p:{xs:1.5,sm:2},borderRadius:2,border:`2px solid ${o.palette.divider}`,width:"100%",maxWidth:"100%",overflow:"hidden"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Efetividade Média"}),e.jsxs(i,{variant:"h5",fontWeight:"bold",color:"success.main",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"},wordBreak:"break-word"},children:[l.summary.avgEffectivenessScore.toFixed(1),"%"]})]})}),e.jsx(r,{item:!0,xs:6,sm:6,md:3,sx:{width:"100%",maxWidth:"100%"},children:e.jsxs(m,{elevation:0,sx:{p:{xs:1.5,sm:2},borderRadius:2,border:`2px solid ${o.palette.divider}`,width:"100%",maxWidth:"100%",overflow:"hidden"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:"Presença Média"}),e.jsxs(i,{variant:"h5",fontWeight:"bold",color:"secondary.main",sx:{fontSize:{xs:"1.25rem",sm:"1.5rem"},wordBreak:"break-word"},children:[l.summary.avgPresenceRate.toFixed(1),"%"]})]})})]}),e.jsxs(m,{elevation:0,sx:{p:2,borderRadius:2,mb:2,border:`1px solid ${o.palette.divider}`},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:j?2:0},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(I,{}),e.jsx(i,{variant:"subtitle1",fontWeight:"bold",children:"Filtros"})]}),e.jsxs(a,{children:[e.jsx(L,{size:"small",startIcon:e.jsx(A,{}),onClick:E,children:"Limpar"}),e.jsx(F,{size:"small",onClick:()=>P(!j),children:j?e.jsx(N,{}):e.jsx(O,{})})]})]}),e.jsx(H,{in:j,children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(_,{period:t.period,startDate:t.startDate,endDate:t.endDate,onPeriodChange:s=>{const x=ee(s);g({...t,period:s,startDate:x?.startDate,endDate:x?.endDate,page:1})},onStartDateChange:s=>d("startDate",s),onEndDateChange:s=>d("endDate",s)})}),e.jsx(r,{item:!0,xs:12,sm:6,md:4,children:e.jsx(c,{fullWidth:!0,label:"Buscar por nome",placeholder:"Digite o nome do professor...",value:t.search||"",onChange:s=>d("search",s.target.value),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{fullWidth:!0,label:"Cidade",value:t.city||"",onChange:s=>d("city",s.target.value),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{fullWidth:!0,type:"number",label:"Efetividade Mínima",value:t.minEffectivenessScore||"",onChange:s=>d("minEffectivenessScore",s.target.value?Number(s.target.value):void 0),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsx(c,{fullWidth:!0,type:"number",label:"Efetividade Máxima",value:t.maxEffectivenessScore||"",onChange:s=>d("maxEffectivenessScore",s.target.value?Number(s.target.value):void 0),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{fullWidth:!0,type:"number",label:"Presença Mínima (%)",value:t.minPresenceRate||"",onChange:s=>d("minPresenceRate",s.target.value?Number(s.target.value):void 0),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{fullWidth:!0,type:"number",label:"Presença Máxima (%)",value:t.maxPresenceRate||"",onChange:s=>d("maxPresenceRate",s.target.value?Number(s.target.value):void 0),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsx(c,{fullWidth:!0,type:"number",label:"Mínimo de Decisões",value:t.minDecisions||"",onChange:s=>d("minDecisions",s.target.value?Number(s.target.value):void 0),size:"small"})}),e.jsx(r,{item:!0,xs:12,sm:6,md:3,children:e.jsxs(c,{fullWidth:!0,select:!0,label:"Ordenar por",value:t.sortBy||"effectivenessScore",onChange:s=>d("sortBy",s.target.value),size:"small",children:[e.jsx(h,{value:"name",children:"Nome"}),e.jsx(h,{value:"effectivenessScore",children:"Efetividade"}),e.jsx(h,{value:"totalPagelas",children:"Total Pagelas"})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(c,{fullWidth:!0,select:!0,label:"Ordem",value:t.sortOrder||"DESC",onChange:s=>d("sortOrder",s.target.value),size:"small",children:[e.jsx(h,{value:"ASC",children:"Crescente"}),e.jsx(h,{value:"DESC",children:"Decrescente"})]})}),e.jsx(r,{item:!0,xs:12,sm:6,md:2,children:e.jsxs(c,{fullWidth:!0,select:!0,label:"Status",value:t.isActive!==void 0?t.isActive.toString():"",onChange:s=>d("isActive",s.target.value===""?void 0:s.target.value==="true"),size:"small",children:[e.jsx(h,{value:"",children:"Todos"}),e.jsx(h,{value:"true",children:"Apenas Ativos"}),e.jsx(h,{value:"false",children:"Inativos"})]})})]})})]}),f?e.jsx(w,{spacing:1.5,sx:{width:"100%",maxWidth:"100%"},children:l.teachers.length===0?e.jsx(m,{elevation:3,sx:{p:3,borderRadius:2,textAlign:"center"},children:e.jsx(i,{color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Nenhum professor encontrado"})}):l.teachers.map(s=>e.jsx(U,{elevation:1,sx:{borderRadius:1.5,borderLeft:`4px solid ${o.palette.success.main}`,width:"100%",maxWidth:"100%",overflow:"hidden",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, ${o.palette.success.main} 0%, ${o.palette.success.light} 100%)`}},children:e.jsx(q,{sx:{p:{xs:1,sm:2},"&:last-child":{pb:{xs:1,sm:2}},width:"100%",maxWidth:"100%"},children:e.jsxs(w,{spacing:1,children:[e.jsx(a,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsxs(i,{fontWeight:"bold",color:"primary",sx:{fontSize:{xs:"0.75rem",sm:"1rem"}},children:["#",s.rank]}),e.jsx(S,{sx:{width:{xs:28,sm:36},height:{xs:28,sm:36},bgcolor:o.palette.success.main,fontSize:{xs:11,sm:14}},children:b(s.name)}),e.jsx(a,{sx:{flex:1,minWidth:0},children:e.jsx(i,{fontWeight:"medium",sx:{fontSize:{xs:"0.75rem",sm:"1rem"},wordBreak:"break-word"},children:s.name})}),s.isActive?e.jsx(u,{label:"Ativo",size:"small",color:"success",variant:"outlined",icon:e.jsx(y,{sx:{fontSize:{xs:12,sm:16}}}),sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},height:{xs:20,sm:24}}}):e.jsx(u,{label:"Inativo",size:"small",variant:"outlined",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},height:{xs:20,sm:24}}})]})}),e.jsx(G,{sx:{my:.5}}),e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsxs(a,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:"block",mb:.25},children:"Clubinho"}),e.jsx(i,{variant:"caption",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"1rem"},wordBreak:"break-word"},children:s.club?`#${s.club.number}`:"-"})]})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(a,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:"block",mb:.25},children:"Local"}),e.jsx(i,{variant:"caption",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"1rem"},wordBreak:"break-word"},children:s.club?`${s.club.city}, ${s.club.state}`:"-"})]})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(a,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:"block",mb:.25},children:"Crianças"}),e.jsxs(i,{variant:"caption",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"1rem"}},children:[s.children.unique," (",s.children.active," ativos)"]})]})}),e.jsx(r,{item:!0,xs:6,children:e.jsxs(a,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:"block",mb:.25},children:"Pagelas"}),e.jsx(i,{variant:"caption",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"1rem"}},children:s.performance.totalPagelas})]})}),s.children.withDecisions>0&&e.jsx(r,{item:!0,xs:12,children:e.jsxs(a,{children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},display:"block",mb:.25},children:"Decisões"}),e.jsx(i,{variant:"caption",fontWeight:"bold",color:"success.main",sx:{fontSize:{xs:"0.7rem",sm:"1rem"}},children:s.children.withDecisions})]})})]}),e.jsxs(a,{children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.25},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"}},children:"Presença"}),e.jsxs(i,{variant:"caption",fontWeight:"bold",sx:{fontSize:{xs:"0.7rem",sm:"1rem"}},children:[s.performance.avgPresenceRate.toFixed(0),"%"]})]}),e.jsx(z,{variant:"determinate",value:s.performance.avgPresenceRate,sx:{height:{xs:4,sm:6},borderRadius:2,"& .MuiLinearProgress-bar":{bgcolor:o.palette.success.main,borderRadius:2}}})]}),e.jsx(a,{children:e.jsx(u,{icon:e.jsx(C,{sx:{fontSize:{xs:12,sm:16}}}),label:`${s.performance.effectivenessScore.toFixed(0)}`,size:"small",color:v(s.performance.effectivenessScore),sx:{fontSize:{xs:"0.65rem",sm:"0.75rem"},height:{xs:20,sm:24},width:"100%","& .MuiChip-label":{px:{xs:.5,sm:1}}}})})]})})},s.teacherId))}):e.jsxs(Q,{component:m,elevation:3,sx:{borderRadius:2,maxHeight:{xs:420,md:560},overflow:"auto"},children:[e.jsxs(V,{stickyHeader:!0,size:"small",children:[e.jsx(X,{children:e.jsxs(W,{sx:{bgcolor:"primary.main"},children:[e.jsx(n,{sx:{color:"white",fontWeight:"bold"},children:"Rank"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},children:"Professor"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},children:"Clubinho"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},children:"Local"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},align:"center",children:"Crianças"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Pagelas"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},align:"right",children:"Presença"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},align:"center",children:"Efetividade"}),e.jsx(n,{sx:{color:"white",fontWeight:"bold"},align:"center",children:"Status"})]})}),e.jsx(J,{children:l.teachers.map(s=>e.jsxs(W,{hover:!0,children:[e.jsx(n,{children:e.jsxs(i,{fontWeight:"bold",color:"primary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:["#",s.rank]})}),e.jsx(n,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(S,{sx:{width:32,height:32,bgcolor:o.palette.success.main},children:b(s.name)}),e.jsx(i,{fontWeight:"medium",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.name})]})}),e.jsx(n,{sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.club?`#${s.club.number}`:"-"}),e.jsx(n,{sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.club?`${s.club.city}, ${s.club.state}`:"-"}),e.jsxs(n,{align:"center",children:[e.jsx(u,{icon:e.jsx(K,{}),label:`${s.children.unique} (${s.children.active} ativos)`,size:"small",variant:"outlined"}),s.children.withDecisions>0&&e.jsxs(i,{variant:"caption",color:"success.main",display:"block",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:[s.children.withDecisions," decisões"]})]}),e.jsx(n,{align:"right",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:s.performance.totalPagelas}),e.jsx(n,{align:"right",children:e.jsxs(a,{children:[e.jsxs(i,{variant:"body2",fontWeight:"bold",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:[s.performance.avgPresenceRate.toFixed(1),"%"]}),e.jsx(z,{variant:"determinate",value:s.performance.avgPresenceRate,sx:{mt:.5,height:3,borderRadius:2,"& .MuiLinearProgress-bar":{bgcolor:o.palette.success.main}}})]})}),e.jsx(n,{align:"center",children:e.jsx(u,{icon:e.jsx(C,{}),label:s.performance.effectivenessScore.toFixed(0),size:"small",color:v(s.performance.effectivenessScore)})}),e.jsx(n,{align:"center",children:s.isActive?e.jsx(u,{label:"Ativo",size:"small",color:"success",variant:"outlined",icon:e.jsx(y,{})}):e.jsx(u,{label:"Inativo",size:"small",variant:"outlined"})})]},s.teacherId))})]}),l.teachers.length===0&&e.jsx(a,{sx:{textAlign:"center",py:4},children:e.jsx(i,{color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:"Nenhum professor encontrado"})})]}),l.pagination&&e.jsx(a,{sx:{px:{xs:1,sm:0},mt:2},children:e.jsx(Y,{component:"div",count:l.pagination.total,page:l.pagination.page-1,onPageChange:R,rowsPerPage:l.pagination.limit,onRowsPerPageChange:D,rowsPerPageOptions:f?[5,10,20]:[10,20,50,100],labelRowsPerPage:"Professores por página:",labelDisplayedRows:({from:s,to:x,count:T})=>`${s}-${x} de ${T}`,sx:{"& .MuiTablePagination-toolbar":{flexWrap:"wrap",gap:1,px:{xs:0,sm:2}},"& .MuiTablePagination-selectLabel, & .MuiTablePagination-displayedRows":{fontSize:{xs:"0.75rem",sm:"0.875rem"}}}})})]}):e.jsx(m,{elevation:3,sx:{p:3,borderRadius:3},children:e.jsx(i,{color:"error",children:"Erro ao carregar professores"})})};export{te as T};
